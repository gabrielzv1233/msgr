<!DOCTYPE html>
<html>
<head>
    <title>msgr</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script>
        var autoScrollEnabled = true;

        $(document).ready(function() {
            // Function to fetch and update the messages
            function updateMessages() {
                $.ajax({
                    url: "/api/get/raw",
                    type: "GET",
                    dataType: "text",
                    success: function(data) {
                        $("#messages").html(data);
                        // Check if auto-scrolling is enabled
                        if (autoScrollEnabled) {
                            // Scroll to bottom
                            window.scrollTo(0, document.body.scrollHeight);
                        }
                    }
                });
            }

            // Update messages initially
            updateMessages();

            // Set interval to update messages every 1 second
            setInterval(function() {
                updateMessages();
            }, 1000);

            // Add the scroll event listener to the window
            $(window).on("scroll", function() {
                var $this = $(this);
                var scrollHeight = document.documentElement.scrollHeight;
                var clientHeight = $this.height();
                var scrollTop = $this.scrollTop();

                if (scrollHeight - scrollTop === clientHeight) {
                    // User is at the very bottom
                    autoScrollEnabled = true;
                } else {
                    // User is not at the very bottom
                    autoScrollEnabled = false;
                }
            });
        });
    </script>
    <style>
        body {
            background-color: #1C2333;
            overflow-x:wrap;
        }

        #messages {
            margin-top:7.17em;
            color: #F5F9FC;
            word-break:break-all;
        }
        #TimeWarning {
          color:#ff0000;
        }
        h3, h4, #TimeWarning, #HowToDeleteMessages {
        }
        .TW {
          color:red;
          font-weight:bold;
        }
        .HTDM {
          color: #A18A1A;
          font-size:1.17em;
          font-weight:bolder;
        }
        .info {
          background-color: #3C445C;
          color: #CCD1D9;
          font-weight: bold;
          border-radius:5px;
        }
        header {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          background-color: #1C2333;
          z-index: 9999;
          margin-bottom:0px;
        }
        a {
          color:blue
        }
    </style>
</head>
<body>
<center>
  <header><b class="HTDM">Hi welcome to the chatroom, please be sure to checkout the <a href="/info">info</a> page</b><br>
<b style="color:white;"><b style="color:gold;">Gold</b> names with a checkmark are owners, <b style="color:limegreen;"">Lime green</b> or <b style="color:#A908B5;">purple</b> names are trusted users</b><br>
<b class="TW">Time is shown as the time of the server</b><br>
</header>
</center>
<div id="messages"></div>
</body>
</html>